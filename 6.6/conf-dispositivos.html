<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>7. Configuración y uso de algunos dispositivos y servicios</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="La distribución Aprendiendo de Jesús de OpenBSD como Sistema de Escritorio"><link rel="up" href="index.html" title="La distribución Aprendiendo de Jesús de OpenBSD como Sistema de Escritorio"><link rel="prev" href="conf-programas.html" title="6. Configuración y uso de algunos programas"><link rel="next" href="duales.html" title="8. Instalaciones duales"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">7. Configuración y uso de algunos dispositivos y servicios</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="conf-programas.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="duales.html">Siguiente</a></td></tr></table><hr></div><div class="sect1" lang="es"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="conf-dispositivos"></a>7. Configuración y uso de algunos dispositivos y servicios</h2></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="hardware-arranque"></a>7.1. Reconocimiento de hardware durante el arranque</h3></div></div></div><p>
      Durante el arranque el kernel detecta hardware usando diversos
      controladores en cierto orden. El orden y los controladores que se
      usen dependen de la configuración que se haya dado al kernel al
      compilarlo. El orden típico configurado en el kernel genérico es:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Procesador, Memoria, BIOS
        </p></li><li><p>
          Discos duros, CDROM y unidades de disquete
        </p></li><li><p>
          Buses, Teclado, Dispositivos ISA
        </p></li><li><p>
          Puertos paralelos y seriales
        </p></li><li><p>
          Dispositivos ISA plug and play
        </p></li></ul></div><p>
      La configuración de la mayoría de estos dispositivos puede ser
      determinada por el controlador, pero con algunos dispositivos (e.g
      ISA, ciertos teclados) el kernel incluye valores predeterminados
      que en algunos casos pueden no corresponder al hardware o que por
      la forma de detectar congelan el sistema completo. En tal caso,
      determine los recursos que el dispositivo tiene configurados con
      jumpers o con software (e.g IRQ, dirección de entrada salida base,
      DMA) y modifique los valores que emplea el kernel de una de estas
      formas (en un caso extremo puede tener que deshabilitar el
      dispositivo):
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Arranque con
          <span class="strong"><strong><code class="literal">boot -c</code></strong></span>
          y cambie parámetros usados por los controladores antes de
          continuar con la detección automática de hardware. El cambio
          sólo durará mientras no reinicie el sistema, puede hacer el
          cambio durable por ejemplo con la orden:
          <span class="strong"><strong><code class="literal">config -u</code></strong></span>.
        </p></li><li><p>
          Después de que su sistema haya iniciado modifique los recursos
          asignados por defecto del kernel con
          <span class="strong"><strong><code class="literal">config -e -o /bsd.new /bsd</code></strong></span>
        </p></li><li><p>
          Recompile el kernel con una configuración apropiada.
        </p></li></ul></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="modificacion-antes-de-arrancar"></a>7.1.1. Modificación antes de arrancar</h4></div></div></div><p>
        Al arrancar, cuando esté en el prompt
        <code class="literal">boot&gt;</code>, inicie con:
      </p><pre class="programlisting">
        boot&gt; boot -c
      
</pre><p>
        Así entrará a un entorno interactivo, que le permite cambiar la
        asignación de recursos predeterminada para algunos dispositivos.
        Por ejemplo si tiene una tarjeta de red compatible NE2000 con
        dirección base 0x300 e IRQ 3, el controlador
        <code class="literal">ne</code> la asignará la interfaz
        <code class="literal">ne1</code> que por defecto usa la dirección base
        0x300 pero la IRQ 10. Desde el prompt que
        <code class="literal">boot -c</code> produce ingrese:
      </p><pre class="programlisting">
        UKC&gt; change ne1
      
</pre><p>
        puede ver otras ordenes disponibles con la orden
        <code class="literal">help</code>. Una vez complete la configuración salga
        del entorno interactivo con <code class="literal">quit</code>, tras esto
        el kernel continuará la detección pero usando los cambios que
        haya hecho.
      </p><p>
        Una vez haya configurado los recursos que un controlador emplea
        para que correspondan a los de un dispositivo y que su sistema
        esté operando, puede hacer el cambio permanente usando:
      </p><pre class="programlisting">
    doas config -e -o /bsd.ne1 -u /bsd
      
</pre><p>
        que le permitirá al mismo entorno interactivo, que procurará
        detectar los cambios que usted haya podido hacer durante el
        arranque, le permitirá completarlos y cuando salga (con
        <code class="literal">quit</code>) escribirá un nuevo kernel
        <code class="literal">/bsd.ne1</code> con la misma configuración de
        <code class="literal">/bsd</code> pero con sus cambios aplicados.
      </p><p>
        Si no logra configurar algún dispositivo y esto hace que el
        sistema completo se congele durante el arranque, puede requerir
        deshabilitar el dispositivo (situación que es muy inusual).
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="hardware-arranque-lecturas"></a>7.1.2. Lecturas recomendadas y referencias
      (hardware-arranque)</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Página del manual unix de autoconf8.
            <code class="literal">autoconf</code> determina el orden y los
            controladores que se usan para la detección automática de
            hardware.
          </p></li><li><p>
            Página del manual unix de boot_config y de 8 donde se
            describen las ordenes aceptados por el entorno interactivo
            de configuración de dispositivos.
          </p></li><li><p>
            Puede encontrar más sobre la secuencia de arranque de
            OpenBSD por ejemplo en
            <a href="http://dhobsd.pasosdeJesus.org/pres21abr2005/" target="_top">http://dhobsd.pasosdeJesus.org/pres21abr2005/</a>
          </p></li></ul></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="impresion"></a>7.2. Impresión</h3></div></div></div><p>
      Para atender trabajos de impresión hay disponibles para Unix
      varios sistemas: lpd, LPRng, CUPS, QPD. El más popular y el
      incluido en la distribución básica de OpenBSD es
      <code class="literal">lpd</code> que además de poder llevar cuentas de cada
      usuario, permite a varios computadores en red compartir una misma
      impresora.
    </p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="uso-impresora"></a>7.2.1. Uso de una impresora ya configurada</h4></div></div></div><p>
        Aun cuando algunos programas ofrecen menús con una opción para
        imprimir, prácticamente todos usan en últimas el programa
        <code class="literal">lpr</code> (o <code class="literal">/usr/local/bin/lpr</code>
        si está usando CUPS) que se encarga de poner la información que
        debe enviarse a la impresora en una cola de trabajos pendientes
        <sup>[<a name="idp584503800" href="#ftn.idp584503800">12</a>]</sup>, que es atendida automáticamente (i.e de ella se
        envían trabajos pendientes cuando la impresora está disponible)
        por un programa.
      </p><p>
        Cada impresora configurada tiene un nombre, la impresora por
        defecto se llama <code class="literal">lp</code> <sup>[<a name="idp2001220344" href="#ftn.idp2001220344">13</a>]</sup>.
      </p><p>
        Posiblemente su sistema esté configurado para permitir a
        <code class="literal">lpr</code> la impresión de textos planos y
        documentos PostScript o PDF. Para programar la impresión de un
        texto plano con nombre <code class="literal">tarea.txt</code> en la
        impresora por defecto, puede emplear:
      </p><pre class="programlisting">
      lpr tarea.txt
    
</pre><p>
        o eventualmente para especificar una impresora diferente a
        <code class="literal">lp</code>, digamos <code class="literal">imp2</code> use la
        opción <code class="literal">-P</code>:
      </p><pre class="programlisting">
      lpr -Pimp2 tarea.txt
    
</pre><p>
        Puede examinar la cola de sus impresiones pendientes con
        <code class="literal">lpq</code> que junto con los nombres de las
        impresiones pendientes presentará un número que la identifica.
        Tal número le permitirá cancelar una de sus tareas de impresión
        pendiente, usándolo como parámetro de <code class="literal">lprm</code>.
      </p><p>
        Para imprimir gráficas y documentos con diversos tipos de letra
        o colores, primero debe convertirse la información a secuencias
        de control particulares de su impresora. Cómo de una impresora a
        otra varían los secuencias de control, en sistemas tipo Unix con
        LPD suele emplearse PostScript (que es un lenguaje apropiado
        para documentos por imprimir) como formato común y se usan los
        filtros del programa Ghostscript para traducir de PostScript al
        formato particular de su impresora <sup>[<a name="idm1778458376" href="#ftn.idm1778458376">14</a>]</sup>. Si se usa CUPS es posible emplear controladores
        particulares para su impresora y no depender de Ghostscript.
      </p><p>
        Ghostscript es un programa que puede leer documentos PostScript
        y PDF <sup>[<a name="idm886559240" href="#ftn.idm886559240">15</a>]</sup> y presentarlos en una ventana de X-Window o
        transformarlos al lenguaje particular de algunas impresoras. Por
        ejemplo para generar a partir de un documento PostScript
        <code class="literal">s2.ps</code> la secuencia de caracteres apropiada
        para una impresora LaserJet en el archivo
        <code class="literal">s2.lj</code> se usaría:
      </p><pre class="programlisting">
    gs -sDEVICE=laserjet -sOutputFile=s2.lj s2.ps -c quit       
      
</pre><p>
        O para imprimir directamente usando <code class="literal">lpr</code>, en
        lugar de <code class="literal">s2.lj</code> puede usar
        <code class="literal">-sOutputFile=\|lpr</code>. Puede experimentar con
        este intérprete tecleando <code class="literal">gs</code> y por ejemplo
        ingresando la siguiente secuencia de instrucciones en lenguaje
        PostScript:
      </p><pre class="programlisting">
    100 100
    moveto
    200 200
    lineto
    stroke
      
</pre><p>
        gs Nombre del programa con el que se inicia Ghostscript
        ---intérprete de PostScript.
      </p><p>
        Para visualizar un documento PostScript o PDF puede emplear el
        programa <code class="literal">gv</code> ---el cual se apoya en
        Ghostscript--- por ejemplo:
      </p><pre class="programlisting">
    gv micarta.ps
    
</pre><p>
        mostrará el documento PostScript <code class="literal">micarta.ps</code>
        en una ventana de X-Window y con menús le permitirá consultarlo
        e imprimirlo.
      </p><p>
        gv Programa empleado para visualizar documentos Postcript o PDF.
      </p><p>
        Para imprimir y hacer transformaciones a un PostScript (por
        ejemplo 2 páginas en una sola), o para convertir de otros
        formatos a PostScript puede emplear el programa
        <code class="literal">a2ps</code>:
      </p><pre class="programlisting">
    a2ps --columns=2 -o micarta-2.ps micarta.ps
      
</pre><p>
        o <code class="literal">mpage</code>:
      </p><pre class="programlisting">
    mpage -2 micarta.ps &gt; micarta-2.ps
      
</pre><p>
        a2ps Programa para transformar de diversos formatos a PostScript
        o para hacer transformaciones a un Postcript.
      </p><p>
        Además de los programas <code class="literal">a2ps</code> y del paquete
        <code class="literal">psutils</code> es posible modificar directamente un
        archivo PostScript. Por ejemplo siguiendo las indicaciones de
        <a href="http://www.ghostscript.com/pipermail/bug-gs/2001-August/000641.html" target="_top">http://www.ghostscript.com/pipermail/bug-gs/2001-August/000641.html</a>,
        resulta posible rotar una página, editando el archivo y en la
        sección <code class="literal">%%%BeginPageSetup</code> agregando después
        de establecer tamaño de página, e.g.
        <code class="literal">595 842 /a4 setpagesize</code>:
      </p><pre class="programlisting">
    currentpagedevice /PageSize get aload pop translate
    180 rotate
    
</pre><p>
        Tanto PostScript como PDF requieren bastante espacio para
        describir un documento, usualmente los documentos PDF requieren
        menos porque mantienen la información comprimida. Para convertir
        entre PostScript y PDF se emplean <code class="literal">ps2pdf</code> y
        <code class="literal">pdf2ps</code> <sup>[<a name="idp2134290040" href="#ftn.idp2134290040">16</a>]</sup>. Para visualizar e imprimir un PDF, además de
        <code class="literal">gv</code>, puede emplear <code class="literal">xpdf</code> o
        el programa Acrobat Reader (<code class="literal">acroread</code>).
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="lpd-local"></a>7.2.2. Configuración de una impresora local con
      <code class="literal">lpd</code></h4></div></div></div><p>
        lpd (también llamado <span class="emphasis"><em>Berkeley line printer spooling
        system</em></span>) es un sistema que maneja una cola de
        impresión por cada impresora configurada, filtros para convertir
        información de diversos tipos (e.g PostScript y PDF) al lenguaje
        particular de cada impresora así como filtros de cuentas que
        permiten monitorear y controlar el uso de cada impresora por
        parte de cada usuario. LPD recibe y procesa solicitudes de
        impresión realizadas por programas cliente e imprime la
        información de las colas en los dispositivo configurados para
        cada cola (e.g <code class="literal">/dev/lpt0</code> o enviando por red a
        una impresora remota).
      </p><p>
        En OpenBSD lpd debe activarse durante el arranque, agregando en
        <code class="literal">/etc/rc.conf.local</code> la línea:
      </p><pre class="programlisting">
    lpd_flags="" 
</pre><p>
        su archivo de configuración principal es
        <code class="literal">/etc/printcap</code> el cual es leído cada vez que
        lpd inicia y donde se configura cada cola de impresión, el
        dispositivo asociado a cada una y sus parámetros, los filtros
        para los diversos tipos de información que puede imprimir y
        filtros de cuentas.
      </p><p>
        lpd es un servidor TCP/IP que imprime trabajos pendientes en las
        colas de impresoras locales (sólo modificables con programas
        clientes) y que atiende conexiones de clientes que emplean el
        protocolo LPD en el puerto TCP 515. La conexión normalmente la
        realiza un programa cliente como <code class="literal">lpr</code>,
        <code class="literal">lpq</code>, <code class="literal">lprm</code> o
        <code class="literal">lpc</code> que pueden solicitar una de las
        siguientes operaciones:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Revisar trabajos en cola de una impresora.
          </p></li><li><p>
            Recibir y poner en cola de una impresora un trabajo de otra
            máquina.
          </p></li><li><p>
            Listado corto del estado de los trabajos de un usuario en la
            cola de una impresora.
          </p></li><li><p>
            Listado largo del estado de los trabajos de un usuario en la
            cola de una impresora.
          </p></li><li><p>
            Eliminar trabajos de un usuario de la cola de una impresora
          </p></li></ul></div><p>
        <code class="literal">lpd</code> envía errores a la bitácora
        <code class="literal">/var/log/lpd-errs</code>.
      </p><p>
        lpd Nombre del servidor de impresión disponible por defecto en
        OpenBSD. Permite manejar colas, dispositivos de impresión,
        filtros y puede llevar cuentas.
      </p><p>
        Además de esta documentación puede consultar más sobre la
        configuración de <code class="literal">lpd</code> en FreeBSDHandBook y
        OpenBSDlpd
      </p><p>
        /dev/lpt0 Dispositivo que representa el primero puerto paralelo.
      </p><p>
        La mayoría de impresoras se conectan al puerto paralelo (por
        ejemplo utilizables con dispositivos
        <code class="literal">/dev/lpt0</code> o <code class="literal">/dev/lpt1</code>).
        Puede probar que su impresora funciona enviando una cadena
        sencilla al puerto apropiado por ejemplo
        <code class="literal">echo "Hola"       &gt;/dev/lpt0</code> o
        <code class="literal">lptest &gt;       /dev/lpt0</code>.
      </p><p>
        /etc/printcap Archivo donde se configuran impresoras para el
        sistema <code class="literal">lpd</code>.
      </p><p>
        El siguiente es un ejemplo del archivo
        <code class="literal">/etc/printcap</code>:
      </p><pre class="programlisting">
      lp|local line printer:\
      :lp=/dev/lpt0:sd=/var/spool/output:lf=/var/log/lpd-errs:
    
</pre><p>
        que configura una impresora local para textos llamada
        <code class="literal">lp</code> o <code class="literal">local line printer</code>.
        Está conectada a <code class="literal">/dev/lpt0</code>, la cola de
        impresión la mantiene en <code class="literal">/var/spool/output</code> y
        envía errores a <code class="literal">/var/log/lpd-errs</code>. Para
        configurar impresoras que puedan imprimir gráficas (así como
        PostScript con diversos tipos de letra) debe emplear un filtro
        del programa Ghostscript.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="cups"></a>7.2.3. CUPS</h4></div></div></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="cups-inst"></a>7.2.3.1. Instalación</h5></div></div></div><p>
          Hay un paquete de CUPS entre los portes oficiales de OpenBSD
          6.6. Una vez instalado puede ejecutarlo con
        </p><pre class="programlisting">
    doas cupsd
    
</pre><p>
          Para que en cada arranque se ejecute automáticamente, se
          recomienda agregar en <code class="literal">rc.local</code>:
        </p><pre class="programlisting">
    if (test -x /usr/local/sbin/cupsd) then {
        echo -n ' cupsd';
        /usr/local/sbin/cupsd;
    } fi;
    
</pre><p>
          La distribución estándar de cups incluye unos pocos archivos
          <code class="literal">ppd</code>, así que posiblemente tendrá que
          generar o conseguir los apropiados para su impresora con
          <code class="literal">foomatic</code> (ver
          <a href="conf-dispositivos.html#foomatic" title="7.2.4. foomatic">foomatic</a>).
        </p></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="cups-conf"></a>7.2.3.2. Configuración</h5></div></div></div><p>
          La configuración de CUPS (por ejemplo para añadir una
          impresora) puede hacerse con facilidad una vez esté
          ejecutándose el servidor, usando un navegador y abriendo en la
          máquina donde corre CUPS el puerto 631, por ejemplo
          <code class="literal">http://127.0.0.1:631</code>. Para hacer labores
          administrativas ingrese con la identificación y la clave de un
          usuario que esté en el grupo <code class="literal">sys</code> o por la
          cuenta <code class="literal">root</code>.
        </p><p>
          También es recomendable que cree un directorio:
        </p><pre class="programlisting">
    doas mkdir /var/spool/cups/tmp
    doas chown _cups:_cups /var/spool/cups/tmp/
    
</pre><p>
          Si tiene problemas al instalar/usar una impresora puede
          consultar el archivo de errores de <code class="literal">cups</code> en:
          <code class="literal">/var/log/cups/error_log</code>.
        </p></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="uso-cups"></a>7.2.3.3. Utilización de CUPS</h5></div></div></div><p>
          El paquete de <code class="literal">cups</code> cuenta con programas
          análogos a los de LPD, pero ubicados en
          <code class="literal">/usr/local/bin</code>. Diversos programas
          emplearan la orden <code class="literal">lpr</code> para hacer
          impresiones, así que tiene dos opciones:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Ejecutar <code class="literal">cups-enable</code> que remplazará los
              ejecutables relacionados con impresión de
              <code class="literal">/usr/</code> con los de CUPS disponibles en
              <code class="literal">/usr/local/</code>.
            </p></li><li><p>
              Configurar cada programa para que en lugar de emplear
              <code class="literal">/usr/bin/lpr</code> utilice
              <code class="literal">/usr/local/bin/lpr</code>. Por ejemplo así
              debe configurar xpdf.
            </p></li></ul></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="foomatic"></a>7.2.4. foomatic</h4></div></div></div><p>
        <code class="literal">foomatic</code> ofrece gran cantidad de
        controladores para una variada gama de impresoras, estos
        controladores e instrucciones para impresoras particulares están
        disponibles en
        <a href="http://www.openprinting.org" target="_top">http://www.openprinting.org</a>
        Es posible emplearlos bien con <code class="literal">lpr</code> o bien con
        <code class="literal">cups</code>.
      </p><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="foomatic-lpr"></a>7.2.4.1. Foomatic con LPR</h5></div></div></div><p>
          Si la impresora está conectada a <code class="literal">/dev/lpt0</code>
          basta que agregue a <code class="literal">/etc/printcap</code> una
          entrada como:
        </p><pre class="programlisting">
lp|local line printer:\
    :lp=/dev/lpt0:\
        :af=/etc/foomatic/laserjet6p.ppd:\
        :if=/usr/local/bin/foomatic-rip:\
        :sd=/var/spool/lpd:\
        :lf=/var/log/lpd-errs:\
        :mx#0:sh:
</pre></div><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="foomatic-cups"></a>7.2.4.2. Foomatic con CUPS</h5></div></div></div><p>
          Cada archivo <code class="literal">ppd</code> que descargue debe
          ubicarlo en: <code class="literal">/usr/local/share/cups/model/</code>.
          Después de agregar archivos en ese directorio reinicie CUPS
          para que lea nuevamente sus archivos de configuración con:
        </p><pre class="programlisting">
# pkill -HUP cupsd
              
</pre></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="discos-duros"></a>7.3. Discos duros</h3></div></div></div><p>
      En la actualidad hay discos duros de estado sólido y discos
      electromecánicos.
    </p><p>
      Los discos de estado sólido o SSD (del inglés <span class="emphasis"><em>solid
      state disk</em></span>) mantienen información de manera permanente
      mediante circuitos integrados, pero ante el sistema operativo se
      presentan como si fuesen discos electromecánicos SCSI.
    </p><p>
      Los discos electromecánicos constan de varias placas circulares
      sobre las que se almacena información magnéticamente. La
      organización o geometría de un disco suele especificarse como
      cantidad de cilindros (del ingleś <span class="emphasis"><em>cylinder</em></span>),
      cantidad de cabezas (del inglés <span class="emphasis"><em>head</em></span>) y
      cantidad de sectores.
    </p><p>
      Para emplear un disco en OpenBSD se requiere:
    </p><div class="itemizedlist"><ul type="disc" compact><li><p>
          que sea manejado por un controlador que lo asocie con un
          dispositivo (e.g /dev/wd0c para un primer disco IDE o
          /dev/sd1c para un segundo disco SCSI)
        </p></li><li><p>
          el disco debe estar formateado a bajo nivel, debe tener
          subparticiones o etiquetas (del inglés
          <span class="emphasis"><em>disklabel</em></span>) en particiones, debe haber
          subparticiones con sistemas de archivos soportados (e.g FFS
          que es el nativo de adJ/OpenBSD, FAT o msdos, ext2 de Linux o
          NTFS de sólo lectura de Windows) que sean montadas en el
          sistema de archivos comenzando por una que debe estar montada
          como directorio raiz / (digamos /dev/sd0a sería primera
          partición de un disco SCSI) .
        </p></li></ul></div><p>
      Además de esto para iniciar un computador con un disco duro
    </p><div class="itemizedlist"><ul type="disc" compact><li><p>
          debe estar configurado como disco de arranque en la BIOS (o
          durante el arranque el usuario debe indicarle a la BIOS por
          cual disco arrancar)
        </p></li><li><p>
          debe tener una partición marcada como iniciable en la tabla de
          particiones y/o emplear un cargador de arranque (e.g GRUB si
          tiene Linux y adJ/OpenBSD en el mismo disco).
        </p></li><li><p>
          Debe tener al menos una partición para OpenBSD (tipo A6) con
          subparticiones entre las cuales haya una con sistema de
          archivos FFS que se monte como raiz.
        </p></li></ul></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="particiones-slices"></a>7.3.1. Particiones</h4></div></div></div><p>
        Una partición es una porción de un disco duro destinada para un
        sistema de archivos. Un disco duro puede particionarse para: *
        Mantener varios sistemas operativos. * Destinar varias
        particiones a adJ/OpenBSD montando cada partición como un
        directorio (y limitando así el espacio de esos directorios), por
        ejemplo /var (donde está la cola de correo), /usr donde se
        ubican programas, /home donde cada usuario tiene su espacio
        personal (ver Ubicación de archivos y directorios). * Destinar
        alguna partición como zona de intercambio (swap) para emplear
        espacio de disco como si fuera memoria RAM. * Si se usa
        partición GTP destinar una partición para el arranque (1G
        bastará)
      </p><p>
        El disco comienza con una tabla de particiones que entre otras
        puede ser tipo MBR o tipo GPT. Las tablas tipo MBR son
        reconocidas por BIOS antiguos y recientes (en modo
        <span class="emphasis"><em>Legacy</em></span>) soporta discos de hasta 2T, y hasta
        4 particiones primarias, si se requieren más particiones una de
        las primarias debe definirse como extendida y dentro de esta se
        podrán dividir otras particiones que se llamaran lógicas. Por su
        parte las particiones GPT son reconocidas por BIOS (UEFI)
        recientes, requieren que una partición se destine a un arranque
        EFI y cada partición puede tener cualquier tamaño y puede haber
        tantas particiones como se requiera.
      </p><p>
        Para cambiar la tabla de particiones de un disco en OpenBSD/adJ
        puede emplearse el programas <code class="literal">fdisk</code>. Se inicia
        pasando como parámetro el dispositivo del disco que desea editar
        (e.g /dev/rsd0c), le permiten modificar la partición hasta que
        este satisfecho con la distribución y finalmente permiten salvar
        la partición configurada en el disco.
      </p><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="inlinemediaobject"><img src="img/warning.png"></span>
          <span class="strong"><strong>Advertencia</strong></span>
        </p><p>
          Al modificar una partición el sistema de archivos que en ella
          hubiera no podrá usarse
        </p></blockquote></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="subparticiones"></a>7.3.2. Subparticiones o etiquetas</h4></div></div></div><p>
        Hay dos niveles de particiones: (1) del BIOS y (2) particulares
        de OpenBSD. Las primeras se configuran con
        <code class="literal">fdisk</code> y las segundas se crean dentro de las
        primeras con <code class="literal">disklabel</code>.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="sistema-de-archivos-ffs"></a>7.3.3. Sistema de archivos ffs</h4></div></div></div><p>
        Un sistema de archivos ffs sólo puede crearse en una partición
        identificada con <code class="literal">disklabel</code>. Como se explica
        en FFS, consta de:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Un superbloque con los parámetros básicos del sistema de
            archivos (e.g tamaño de cada bloque, lista de grupos de
            cilindros) y con los parámetros del hardware que afectan el
            desempeño<sup>[<a name="idm830333960" href="#ftn.idm830333960">17</a>]</sup> (tipo de transferencia de disco a memoria,
            tiempo esperado por transferencia, bloques por pista,
            velocidad de rotación).
          </p></li><li><p>
            Copias de seguridad del superbloque en diversos bloques del
            disco.
          </p></li><li><p>
            Archivos, algunos de los cuales pueden ser directorios. Todo
            archivo tiene asociado un nodo-i, que mantiene información
            del archivo (dueño, tiempo de última modificación y de
            creación, algunos de los bloques que emplea el archivo y
            referencia a otros nodos-i con el resto de bloques).
          </p></li></ul></div><p>
        Los bloques pueden fragmentarse para aprovechar espacio cuando
        se mantienen archivos pequeños. Cada grupo de cilindros tiene
        una tabla de fragmentos libres en los bloques del grupo e
        información sobre bloques libres de acuerdo a las diversas
        posiciones rotacionales (para optimizar ubicación de información
        de acuerdo al hardware disponible).
      </p><p>
        Algunos bloques se reservan para que sólo puedan ser usados por
        el administrador (reserva de espacio libre). En OpenBSD por
        defecto es 5% del espacio total.
      </p><p>
        Entre las características soportadas por FFS están:
      </p><div class="itemizedlist"><ul type="disc" compact><li><p>
            Enlaces duros dentro de una misma partición o enlaces
            simbólicos. Candados, nombres largos para archivos,
            validaciones y cuotas (para limitar espacio utilizable por
            los usuarios).
          </p></li></ul></div><p>
        Para revisar un sistema de archivos <code class="literal">ffs</code>
        (digamos que esté en la partición <code class="literal">/dev/wd1j</code>)
        ejecute:
      </p><pre class="programlisting">
    doas fsck_ffs /dev/rwd1j
      
</pre><p>
        note la <code class="literal">r</code> antes de <code class="literal">wd1j</code>
        que indica que la partición debe tratarse en modo puro (del
        inglés <span class="emphasis"><em>raw</em></span>). Puede agregar la opción
        <code class="literal">-y</code> antes del dispositivo para responder si
        por defecto a toda pregunta (intentado que solucione
        automáticamente todos los problemas). En algunos casos cuando un
        disco está bastante inconsistente en su estructura, puede
        perderse información que <code class="literal">fsck_ffs</code> intentará
        recuperar y dejar en archivos cuyos nombres son números en el
        directorio <code class="literal">lost+found</code>. En los casos que se
        dañe el superbloque de la partición que desea revisar
        <code class="literal">fsck_ffs</code> se negará a realizar el chequeo, en
        tales casos puede intentar con un superbloque de respaldo
        --típicamente hay uno en el bloque 32:
      </p><pre class="programlisting">
    doas fsck_ffs -b 32 /dev/rwd1j
      
</pre><p>
        Para crear un sistema de archivos <code class="literal">ffs</code> en un
        disco ya particionado con <code class="literal">disklabel</code> puede
        emplearse <code class="literal">newfs</code>, por ejemplo:
      </p><pre class="programlisting">
    doas newfs -t ffs /dev/wd1j
</pre><div class="blockquote"><blockquote class="blockquote"><p>
          <span class="inlinemediaobject"><img src="img/warning.png"></span>
          <span class="strong"><strong>Advertencia</strong></span>
        </p><p>
          Al crear un nuevo sistema de archivos se borra la información
          que pudiera haber existido.
        </p></blockquote></div><p>
        Para detectar particiones ffs en un disco, puede emplearse
        <code class="literal">scan_ffs</code>.
      </p><p>
        Para examinar la estructura de una partición con ffs, se emplea
        <code class="literal">dumpfs</code>. Puede afinarse un sistema ffs con
        <code class="literal">tunefs</code>
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="zonas-de-intercambio"></a>7.3.4. Zonas de intercambio (swap)</h4></div></div></div><p>
        Son porciones de un disco duro que pueden emplearse como si
        fuera memoria RAM (aunque es mucho más lenta). Si por ejemplo
        desea agregar como dispositivo de intercambio el disco
        <code class="literal">/dev/wd1l</code> debe:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Asegurarse de poner tipo swap a la partición. Puede emplear
            <code class="literal">disklabel</code>. Por ejemplo puede emplear el
            modo interactivo de este programa:
          </p><pre class="programlisting">
    doas disklabel -E /dev/wd1c 
</pre><p>
            en este modo puede examinar las particiones y divisiones del
            disco con p, puede ver una ayuda abreviada con h. Con m le
            será posible cambiar el tipo de una partición (por ejemplo
            puede ser <code class="literal">4.2BSD</code> si se trata de un
            sistema ffs o <code class="literal">swap</code> si se trata de un
            dispositivo para intercambio), y la ubicación.
          </p><div class="blockquote"><blockquote class="blockquote"><p>
              <span class="inlinemediaobject"><img src="img/caution.png"></span>
              <span class="strong"><strong>Cuidado</strong></span>
            </p><p>
              El sitio donde reubique una partición NO debe estar
              traslapado sobre una partición ya existente. Si traslapa
              una partición sobre otra, la información que hubiera en la
              partición sobre la que traslapa puede perderse de manera
              irreversible.
            </p></blockquote></div></li><li><p>
            Agregue una línea a su archivo <code class="literal">/etc/fstab</code>
            con el dispositivo de intercambio, punto de montaje
            <code class="literal">none</code>, tipo <code class="literal">swap</code> y
            opción <code class="literal">sw</code>:
          </p><pre class="programlisting">
    /dev/wd1l none  swap sw 0 0 
</pre><p>
            Con este cambio, el dispositivo será montado como zona de
            intercambio cada vez que el sistema inicie (está en
            <code class="literal">/etc/rc</code>).
          </p></li><li><p>
            Intente agregar el dispositivo como zona de intercambio sin
            reiniciar con:
          </p><pre class="programlisting">
    doas swapon -a 
</pre><p>
            o con:
          </p><pre class="programlisting">
    doas swapctl -A -t blk 
</pre><p>
            Ambas ordenes intentarán montar como zonas de intercambio
            todos dispositivos por bloques de
            <code class="literal">/etc/fstab</code> que tengan la opción
            <code class="literal">sw</code>. Puede verificar la adición listando
            todas las zonas de intercambio con:
          </p><pre class="programlisting">
    doas swapctl -l 
</pre></li></ol></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="raid"></a>7.3.5. Arreglo de discos RAID por software</h4></div></div></div><div class="literallayout"><p>Cómo se explica en la página del manual de <code class="literal">softraid</code>, OpenBSD incluye el dispositivo <code class="literal">softraid</code> que puede proveer RAID y otros servicios relacionados con entrada/salida.<br>
Un volumen es un disco virtual que consta de varios "pedazos", cada "pedazo" (del inglés <span class="strong"><strong>chunk</strong></span>) es una subpartición del disco de tipo RAID (el tipo se establece con <code class="literal">disklabel</code>).</p></div><p>
        Las posibles disciplinas que soporta <code class="literal">softraid</code>
        son:
      </p><div class="itemizedlist"><ul type="disc" compact><li><p>
            RAID 0: Que segmenta los datos sobre un número de
            "pedazos" para aumentar el desempeño (aunque no
            provee redundancia). No es posible hacer volumenes de
            arranque.
          </p></li><li><p>
            RAID 1: Copia cada dato en más de un "pedazo" para
            facilitar recuperar información en caso de perdida de datos.
            Si es posible hacer volúmenes de arranque.
          </p></li><li><p>
            RAID 5: Divide los datos en varios pedazos pero proveen
            paridad para prevenir perdida de datos. No es posible hacer
            volumenes de arranque.
          </p></li><li><p>
            CRYPTO: Cifra los datos en un sólo pedazo para proveer
            confidencialidad (aunque no redundancia). Si es posible
            hacer volumenes de arranque.
          </p></li><li><p>
            CONCAT: Que concatena varios pedazos, aunque no provee
            redundancia ni permite hacer volumenes de arranque.
          </p></li></ul></div><p>
        Hemos notado en la práctica que cada "pedazo" debe ser
        máximo de 2T.
      </p><div class="sect4" lang="es"><div class="titlepage"><div><div><h5 class="title"><a name="raid-1-sin-arranque"></a>7.3.5.1. RAID 1 sin arranque</h5></div></div></div><p>
          La disciplina RAID 1 provee redundancia, pues cada dato lo
          escribe en todos los pedazos que conforman el arreglo. Así que
          cada pedazo es como una copia de cada uno de los otros.
        </p><p>
          Para el caso típico de 2 "pedazos" que se
          configurarán en RAID 1 pero no como volumen de arranque, se
          recomienda usar 3 discos duros. Uno para arrancar (digamos
          sd0) y 2 de las mismas dimensiones que se configuraran en RAID
          1 (digamos sd1 y sd2 cada uno de 2T).
        </p><p>
          sd0 debe tener un sistema OpenBSD/adJ típico para (1)
          configurar el RAID 1 para sd1 y sd2 y (2) montar el arreglo
          resultante en un directorio de su sistema de archivos.
        </p><p>
          Primero se preparan sd1 y sd2 completos para OpenBSD (o si es
          una parte de cada uno usar -e)
        </p><pre class="programlisting">
    doas fdisk -iy sd1
    doas fdisk -iy sd2
</pre><p>
          Después en cada uno se crea una subpartición de tipo RAID con
          disklabel, ambas deben quedar del mismo tamaño y se recomienda
          inicializarlas en ceros:
        </p><pre class="programlisting">
    $ doas disklabel -E sd1
    Label editor (enter '?' for help at any prompt)
    &gt; a a
    offset: [64]
    size: [39825135] *
    FS type: [4.2BSD] RAID
    &gt; w
    &gt; q
    $ doas dd if=/dev/zero of=/dev/rsd1a bs=1m count=1
</pre><p>
          En el ejemplo anterior se presentó el caso de creación de
          sd1a, debe repetirse lo mismo para sd2 para contar con sd2a.
        </p><p>
          A continuación debe ensamblarse el arreglo RAID con algo como:
        </p><pre class="programlisting">
    doas bioctl -v -c 1 -l sd1a,sd2a softraid0
</pre><p>
          Que creará otro dispositivo, digamos sd3 (aún si necesita
          hacer varios arreglos RAID emplee siempre softraid0). Puede
          verificar que sd3 es el arreglo RAID con:
        </p><pre class="programlisting">
    $ doas bioctl sd3
    Volume Status Size Device 
    softraid0 0 Online 3298542608896 sd3 RAID1 
    0 Online 3298542608896 0:0.0 noencl 
    1 Online 3298542608896 0:1.0 noencl
</pre><p>
          Con el arreglo ensamblado en sd3, usted puede operar con ese
          dispositivo como si fuera un disco más, es recomendable que
          inicialice sus primeros sectores en 0:
        </p><pre class="programlisting">
    doas dd if=/dev/zero of=/dev/rsd3c bs=1m count=1
</pre><p>
          Y proceda a crear partición, subpartición(es) e inicializar
          cada subpartición. En el siguiente ejemplo se creará una sola
          subpartición, se inicializará y se montará en /var/raid1:
        </p><pre class="programlisting">
    $ doas fdisk -iy /dev/rsd3c
    $ doas disklabel -E /dev/sd3c
    &gt; a a
    offset: [64]
    size: [3999992128] *
    FS type: [4.2BSD] 
    &gt; w
    &gt; q
    $ doas newfs /dev/rsd3a
    $ doas mkdir /var/raid1
    $ doas mount /dev/sd3a /var/raid1
</pre><p>
          Con el ejemplo presentado ya habrían disponibles 2T con
          redundancia RAID 1 en el punto de montaje /var/raid1.
        </p><p>
          Para hacer el cambio permanente es recomendable que en
          /etc/fstab agregue el duid del arreglo (pues al agregar discos
          físicos podría cambiar el sd3 por ejemplo por sd4). Examina el
          duid con disklabel /dev/sd3c
        </p><div class="sect5" lang="es"><div class="titlepage"><div><div><h6 class="title"><a name="operaci%C3%B3n-y-recuperaci%C3%B3n-en-caso-de-falla-de-uno-de-los-discos"></a>7.3.5.1.1. Operación y recuperación en caso de falla de uno de los
          discos</h6></div></div></div><p>
            Es importante revisar con periodicidad el estado del arreglo
            con:
          </p><pre class="programlisting">
    $ doas bioctl sd3
</pre><p>
            Allí podría verse si alguno de los discos está fallando
            (Offline) y en tal caso, debe remplazarse el disco
            defectuoso (digamos sd2). En el nuevo disco debe crearse
            partición y subpartición con las mismas características del
            que funciona bien y entonces debe reconstruirse el espejo.
            Por ejemplo para reconstruir y unir un nuevo /dev/sd2a:
          </p><pre class="programlisting">
    $ doas bioctl -R /dev/sd2a sd3
</pre></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="lecturas-recomendadas-y-referencias-discos-duros"></a>7.3.6. Lecturas recomendadas y referencias Discos Duros</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            https://www.howtogeek.com/193669/whats-the-difference-between-gpt-and-mbr-when-partitioning-a-drive/
          </p></li><li><p>
            Página del manual de <code class="literal">softraid</code>
          </p></li><li><p>
            Página del manual de <code class="literal">bioctl</code>
          </p></li><li><p>
            Particiones MBR y GPT:
            <a href="https://www.openbsd.org/faq/faq14.html" target="_top">https://www.openbsd.org/faq/faq14.html</a>
          </p></li></ul></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="cd"></a>7.4. Unidad de CD-ROM</h3></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="montar-cd"></a>7.4.1. Montar un CD</h4></div></div></div><p>
        Cómo en el caso de disquetes, por defecto, sólo root puede
        montar CDs. Puede permitir que se haga desde una cuenta
        diferente, agregando tal cuenta al grupo
        <code class="literal">operator</code> y cambiando la variable del kernel
        <code class="literal">kern.usermount</code> como se presentó en la sección
        sobre disquetes. Por ejemplo para montar el CD que está en la
        primera unidad (después de haber creado el directorio
        <code class="literal">/mnt/cdrom</code>):
      </p><pre class="programlisting">
    mount -t cd9660 /dev/cd0c /mnt/cdrom 
</pre><p>
        o para lograrlo con sólo <code class="literal">mount /mnt/cdrom</code> se
        agregaría en <code class="literal">/etc/fstab</code>:
      </p><pre class="programlisting">
    /dev/cd0c /mnt/cdrom cd9660 ro,noauto 0 0 
</pre><p>
        Para desmontar un CD se emplea:
      </p><pre class="programlisting">
    umount /mnt/cdrom
</pre></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="montar-imagen-iso"></a>7.4.2. Montar imagen ISO 9660</h4></div></div></div><p>
        Para montar una imagen ISO (i.e un archivo con información de un
        CD con el sistema de archivos ISO 9660), primero debe crear un
        dispositivo que la represente, por ejemplo:
      </p><pre class="programlisting">
    vnconfig -c vnd0 /home/pablo/micd.iso 
    mount /dev/vnd0a /mnt/tmp
    
</pre></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-cd-y-quemadoras"></a>7.4.3. Lecturas recomendadas y referencias CD y Quemadoras</h4></div></div></div><div class="itemizedlist"><ul type="disc" compact><li><p>
            Más sobre montaje de archivos con
            <code class="literal">man fstab</code>.
          </p></li></ul></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="quemadora"></a>7.5. Quemadora de CD-R y CD-RW</h3></div></div></div><p>
      Una quemadora de CD-R y CD-RW se puede comportar como un lector de
      CDs y usarse como se explica en la sección sobre unidades de CD
      (ver <a href="conf-dispositivos.html#cd" title="7.4. Unidad de CD-ROM">Sección 7.4, “Unidad de CD-ROM”</a>.
    </p><p>
      Para quemar una imagen de un CD con datos que usted elija se debe:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Contar con una imagen ISO del CD que desea quemar. Es decir un
          archivo con la información que irá en el CD en formato
          ISO9660. Tal imagen la puede crear a partir de un CD que tenga
          o crearla con archivos y directorios que usted elija.
        </p></li><li><p>
          Grabar (o quemar) la imagen ISO en un CD-R o un CD-RW.
        </p></li></ul></div><p>
      Cada uno de estos pasos se describe en detalle a continuación.
    </p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="crear-imagen-de-cd"></a>7.5.1. Crear una imagen ISO a partir de un CD existente</h4></div></div></div><p>
        Para crear una imagen ISO de un CD existente primero examine la
        cantidad de sectores de los que consta con
      </p><pre class="programlisting">
    doas disklabel /dev/rcd0c
      
</pre><p>
        Suponiendo que cada sector tenga 2048 bytes y el total de
        sectores fuera 112120 puede crear la imagen
        (<code class="literal">/home/imagen/micd.iso</code>) empleando la orden:
      </p><pre class="programlisting">
    doas dd if=/dev/rcd0c of=/home/imagen/micd.iso bs=2048 count=112120
      
</pre></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="crear-nueva-imagen-iso"></a>7.5.2. Crear una imagen nueva ISO 9660</h4></div></div></div><p>
        Para crear una imagen ISO a partir de datos que usted elija,
        deje los archivos y directorios por incluir en un directorio
        (digamos <code class="literal">/home/pablo/imagen</code>), el
        cual después puede especificarse a <code class="literal">mkisofs</code>
        (programa que hace parte del paquete
        <code class="literal">cdrtools</code>). El formato estándar para salvar
        información en CD-ROMs (ISO9660) sólo permite nombres de
        archivos con 8 caracteres, extensiones de 3 y restricciones en
        la codificación de caracteres, hay algunas extensiones que
        permiten aumentar este margen, una de estas que es algo portable
        es Rock Ridge (funciona al menos en sistemas Unix y en Windows).
      </p><p>
        Para crear una imagen ISO con nombre
        <code class="literal">/home/pablo/micd.iso</code> a partir de la
        información disponible en
        <code class="literal">/home/pablo/imagen</code> puede ejecutar
        como usuario <code class="literal">root</code>:
      </p><pre class="programlisting">
    cd /home/pablo/imagen
    doas mkisofs -r -l -f -o /home/pablo/micd.iso  .
    
</pre><p>
        Note que la imagen creada emplea la extensión Rock Ridge (opción
        <code class="literal">-r</code>), permite nombres largos (opción
        <code class="literal">-l</code>) y maneja enlaces simbólicos (opción
        <code class="literal">-f</code>).
      </p><p>
        Por otra parte en sistemas i386 o amd64 es posible arrancar un
        computador desde un CD, configurando el arranque del computador
        desde el BIOS para que sea por la unidad y cuando la imagen del
        CD se crea con la extensión El Torito. La extensión El Torito
        permite incluir la imagen de un floppy que se usa para arrancar.
      </p><p>
        Para crear una imagen ISO que use extensión Rock Ridge, con una
        tabla de contenido de cada directorio
        (<code class="literal">TRANS.TBL</code>), que emplee la imagen de disquete
        <code class="literal">floppy.img</code> para arrancar, con información de
        derechos de reproducción del archivo
        <code class="literal">/home/pablo/Derechos.txt</code>, siguiendo
        enlaces simbólicos y con la jerarquía de directorios y archivos
        de <code class="literal">/home/pablo/imagen/</code> (en la que no
        debe existir el archivo <code class="literal">boot.catalog</code>) use:
      </p><pre class="programlisting">
    cd /home/pablo/imagen
    doas mkisofs -b floppy.img -c boot.catalog -copyright /home/pablo/Derechos.txt \
      -r -l -f -o /home/pablo/micd.iso  .
    
</pre></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="quemar-imagen-iso"></a>7.5.3. Quemado de una imagen ISO 9660 en un CD-R o en un
      CD-RW</h4></div></div></div><p>
        Para escribir una imagen ISO (<code class="literal">micd.iso</code>) con
        datos en un CD-R, puede emplear el programa
        <code class="literal">cdrecord</code>, el cual puede emplear como
        dispositivo uno de la forma <code class="literal">/dev/cd0c</code> o bien
        <code class="literal">/dev/rcd0c:0,0,0</code>, por ejemplo:
      </p><pre class="programlisting">
    doas cdrecord dev=/dev/cd0c -data speed=16 /home/pablo/micd.iso
    
</pre><p>
        Si emplea un CD-RW tenga en cuenta blanquearlo antes de escribir
        usando la opción <code class="literal">blank=fast</code>:
      </p><pre class="programlisting">
    doas cdrecord dev=/dev/cd0c -data blank=fast speed=16 /home/pablo/micd.iso
    
</pre><p>
        Si desea emplear varias sesiones en un mismo CD-R (o CD-RW)
        tenga en cuenta:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            La primera sesión se hace creando una imagen ISO usual y al
            quemar con cdrecord agregue la opción
            <code class="literal">-multi</code>.
          </p></li><li><p>
            Las imágenes de sesiones posteriores deben crearse empleando
            la opción <code class="literal">-C</code> de
            <code class="literal">mkisofs</code> <sup>[<a name="idm921787528" href="#ftn.idm921787528">18</a>]</sup>. Los datos precisos que debe pasar a la opción
            -C los examina con:
          </p><pre class="programlisting">
    doas cdrecord dev=/dev/cd0c -msinfo
</pre><p>
            Que retorna un par de números (supongamos que 18904,26106),
            los cuales debe usar con mkisofs, por ejemplo:
          </p><pre class="programlisting">
    doas mkisofs -r -l -f -C 18904,26106 -o ../micd.iso .
</pre><p>
            Y nuevamente debe pasar la opción <code class="literal">-multi</code>
            a <code class="literal">cdrecord</code> en el momento de quemar.
          </p></li></ul></div><p>
        Para crear CDs de audio deben emplearse archivos de sonido (por
        ejemplo formatos <code class="literal">.wav</code> o
        <code class="literal">.au</code>) con información de 16 bits en estéreo a
        44100 muestras/s, codificación PCM. Al quemar con
        <code class="literal">cdrecord</code> en lugar de la opción
        <code class="literal">-data</code> debe emplearse
        <code class="literal">-audio</code>.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-quemadoras"></a>7.5.4. Lecturas recomendadas y referencias Quemadoras</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            Puede consultar más sobre creación de imágenes para CDs con
            <code class="literal">man mkisofs</code> (tras haber instalado
            <code class="literal">cdrtools</code>)).
          </p></li><li><p>
            Para conocer más sobre el quemado de CDs puede consultar
            <code class="literal">man cdrecord</code> (también después de instalar
            el paquete <code class="literal">cdrtools</code>). En foros de
            usuarios pueden verse mensajes como
            <a href="http://archives.neohapsis.com/archives/openbsd/2002-10/0548.html" target="_top">http://archives.neohapsis.com/archives/openbsd/2002-10/0548.html</a>,
            <a href="http://www.deadly.org/article.php3?sid=20031105030127&amp;mode=flat" target="_top">http://www.deadly.org/article.php3?sid=20031105030127&amp;mode=flat</a>
            y
            <a href="http://archives.neohapsis.com/archives/openbsd/2001-12/2096.html" target="_top">http://archives.neohapsis.com/archives/openbsd/2001-12/2096.html</a>
          </p></li></ul></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="dvd"></a>7.6. Operaciones con DVD</h3></div></div></div><p>
      El sistema de archivos de los DVD es UDF, que es diferente al de
      los CDs (ISO9660). Desde la versión 4.0, OpenBSD soporta las
      versiones 1.02 y 1.50 de UDF en modos plain y VAT (ver &lt;&gt;
    </p><p>
      Las operaciones de montaje de DVDs, montaje de imágenes y copia de
      DVDs a disco son como las de CDs remplazando el tipo
      <code class="literal">cd9660</code> por <code class="literal">udf</code> (ver
      <a href="conf-dispositivos.html#montar-cd" title="7.4.1. Montar un CD">Sección 7.4.1, “Montar un CD”</a>,
      <a href="conf-dispositivos.html#montar-imagen-iso" title="7.4.2. Montar imagen ISO 9660">Sección 7.4.2, “Montar imagen ISO 9660”</a> y
      <a href="conf-dispositivos.html#crear-imagen-de-cd" title="7.5.1. Crear una imagen ISO a partir de un CD existente">Sección 7.5.1, “Crear una imagen ISO a partir de un CD existente”</a>).
    </p><p>
      Para quemar DVDs es necesario instalar el paquete
      <code class="literal">cdrtools</code>, el cual incluye el programa
      <code class="literal">growisofs</code> que permite quemar DVDs al menos de
      dos formas:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Incluir una serie de archivos sin necesidad de preparar
          previamente una imagen del DVD. Por ejemplo para quemar un DVD
          que tenga los archivos <code class="literal">/home/copia/a</code> y
          <code class="literal">/home/copia/b</code>:
        </p><pre class="programlisting">
    doas growisofs -Z /dev/rcd0c -R /home/copia/a /home/copia/b
</pre></li><li><p>
          Para quemar un DVD con la imagen ISO
          <code class="literal">dvd.iso</code>
        </p><pre class="programlisting">
    doas growisofs -dvd-compat -Z /dev/rcd0c=dvd.iso
</pre></li></ol></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-dvd"></a>7.6.1. Lecturas recomendadas y referencias DVD</h4></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">man mount_udf</code> y
            <code class="literal">man growisofs</code>.
          </p></li><li><p>
            Universal Disk Format:
            <a href="http://en.wikipedia.org/wiki/Universal_Disk_Format" target="_top">http://en.wikipedia.org/wiki/Universal_Disk_Format</a>
          </p></li></ul></div></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="memoria-usb"></a>7.7. Memoria USB</h3></div></div></div><p>
      Para emplear una memoria USB después de conectarse debe:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Examinar el dispositivo con el cual fue reconocida su memoria
          tras conectarla. Vea los últimos mensajes presentados por
          <code class="literal">dmesg</code>, típicamente será
          <code class="literal">sd0</code>.
        </p></li><li><p>
          Examinar la partición por montar con
        </p><pre class="programlisting">
    doas disklabel /dev/rsd0c
</pre><p>
          la partición que deberá montar podría ser
          <code class="literal">/dev/sd0c</code> o por ejemplo
          <code class="literal">/dev/sd0i</code>.
        </p></li><li><p>
          Montar la partición apropiada en un punto del sistema de
          archivos, por ejemplo con:
        </p><pre class="programlisting">
    doas mkdir /mnt/usb
    doas mount /dev/sd0i /mnt/usb
</pre></li><li><p>
          Usar su memoria para leer/escribir (recordando que sólo podría
          escribir el usuario que sea dueño del punto de montaje)
        </p></li><li><p>
          Cuando termine su utilización desmontar por ejemplo con:
        </p><pre class="programlisting">
    doas umount /mnt/usb
</pre></li></ol></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="imagen-cifrada"></a>7.8. Imagen cifrada</h3></div></div></div><p>
      Es posible tener particiones cifradas, estas requieren que se
      ingrese una clave antes de montarlas ---por ejemplo en el momento
      del arranque.
    </p><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="crear-imagen"></a>7.8.1. Creación de la imagen</h4></div></div></div><p>
        Para crear una imagen de aprox. 500MB en el archivo
        <code class="literal">/var/post.img</code> puede usar:
      </p><pre class="programlisting">
    doas dd if=/dev/zero of=/var/post.img bs=1024 count=500000
    doas vnconfig -ckv vnd0 /var/post.img
    doas newfs /dev/vnd0c
    doas vnconfig -u vnd0
          
</pre><p>
        La clave que ingrese tras
        <code class="literal">vnconfig -ckv vnd0 /var/post.img</code>, la
        requerirá posteriormente para usar la imagen.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="montar-imagen"></a>7.8.2. Montar imagen</h4></div></div></div><p>
        Esta imagen puede ser montadas (por ejemplo en
        <code class="literal">/var/postgresql</code>) con el siguiente archivo de
        ordenes (ubíquelo por ejemplo en
        <code class="literal">/usr/local/sbin/montapost.sh</code>):
      </p><pre class="programlisting">
#!/bin/sh
# Monta imágenes cifradas en OpenBSD. Dominio público. 2006.

if (test ! -d /var/postgresql) then {
    mkdir /var/postgresql
    chown _postgresql:_postgresql /var/postgresql
} fi;
vnconfig -ckv vnd0 /var/post.img
mount /dev/vnd0c /var/postgresql
    
</pre><p>
        y recuerde otorgar permiso de ejecución del mismo:
      </p><pre class="programlisting">
    doas chmod +x /usr/local/sbin/montapost.sh
    
</pre><p>
        Notará que este ejemplo es para montar una partición en la que
        funcionará una base de datos PostgreSQL, si no existiera el
        usuario <code class="literal">_postgresql</code> antes de ejecutar este
        archivo de ordenes ejecute
        <code class="literal">chmod a+w /var/postgresql</code> y después de que
        haya instalado PostgreSQL:
      </p><pre class="programlisting">
    doas chown _postgresql:_postgresql /var/postgresql
    doas chmod o-w /var/postgresql
    
</pre></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="montar-arranque"></a>7.8.3. Montar en el arranque</h4></div></div></div><p>
        Este script debe ejecutarse en el momento del arranque y antes
        de iniciar la base de datos, agregue a su archivo
        <code class="literal">/etc/rc.local</code> (antes de la inicialización de
        PostgreSQL):
      </p><pre class="programlisting">
    doas /usr/local/sbin/montapost.sh
        
</pre><p>
        De forma que en cada arranque el script le solicitará la clave
        antes de continuar.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="referencias-imagen-cifrada"></a>7.8.4. Lecturas recomendadas y referencias Imagen Cifrada</h4></div></div></div><p>
        Página <code class="literal">man vnconfig</code>.
      </p></div></div><div class="sect2" lang="es"><div class="titlepage"><div><div><h3 class="title"><a name="teclado-en-espanol"></a>7.9. Teclado en español</h3></div></div></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="consolas"></a>7.9.1. En las consolas tipo texto</h4></div></div></div><p>
        Si su teclado es español o latinoamericano puede configurarlo
        durante la instalación. Después de instalado puede elegir otra
        configuración con <code class="literal">keyb la</code> o
        <code class="literal">keyb es</code>
      </p><p>
        Si tiene un teclado US y desea emplear teclas muertas en la
        consola puede usar desde la línea de ordenes:
      </p><pre class="programlisting">
    doas wsconsctl -w keyboard.map+="keycode 40=dead_acute dead_diaeresis"
    doas wsconsctl -w keyboard.map+="keycode 41=dead_grave dead_tilde"
    doas wsconsctl -w keyboard.map+="keycode 56=Cmd2 Multi_key" 
</pre><p>
        o para que esta configuración siempre sea realizada durante el
        arranque agregue estas líneas al final de
        <code class="literal">/etc/rc.local</code> (puede agregar al final de cada
        línea <code class="literal">&gt; /dev/null</code>).
      </p><p>
        Estas líneas configuran entre otros:
      </p><div class="variablelist"><dl><dt><span class="term">
            '
          </span></dt><dd><p>
              como tecla muerta para la tilde (seguido de un espacio
              producirá el apostrofe)
            </p></dd><dt><span class="term">
            "
          </span></dt><dd><p>
              como tecla muerta para la diéresis (seguido de un espacio
              producirá las comillas)
            </p></dd><dt><span class="term">
            `
          </span></dt><dd><p>
              como tecla muerta para el acento grave (seguido de un
              espacio produce el apostrofe izquierdo)
            </p></dd><dt><span class="term">
            ~
          </span></dt><dd><p>
              como tecla muerta para la virgulilla (seguido de un
              espacio produce ~)
            </p></dd><dt><span class="term">
            ^
          </span></dt><dd><p>
              como tecla muerta para el acento circunflejo
            </p></dd><dt><span class="term">
            Shift+Alt izquierdo
          </span></dt><dd><p>
              Como tecla de composición
            </p></dd></dl></div><p>
        La tecla de composición<sup>[<a name="idp1995308536" href="#ftn.idp1995308536">19</a>]</sup> le permitirá generar un carácter empleando una
        secuencia de dos teclas. Por ejemplo si presiona la tecla de
        composición (i.e Shift+Alt izquierdo con la configuración
        presentada), y después presiona ? seguido de ? obtendrá el
        carácter ¿. En el apéndice
        <a href="caracteres-que-pueden-generarse.html" title="B. Caracteres que pueden generarse">Caracteres que
        pueden generarse</a> encontrará una tabla con todas las
        combinaciones de teclas que pueden usarse con la tecla compose y
        con teclas muertas.
      </p></div><div class="sect3" lang="es"><div class="titlepage"><div><div><h4 class="title"><a name="teclado-xwindow"></a>7.9.2. X-Window</h4></div></div></div><p>
        Dado que X-Window emplea el teclado en modo crudo la
        configuración que haga para las consolas virtuales no quedará
        disponible.
      </p><p>
        Si tiene un teclado en español puede configurarlo con
        <code class="literal">xorgcfg</code> o bien con
        <code class="literal">xorgcfg -textmode</code>, o bien editando el archivo
        <code class="literal">/etc/X11/xorg.conf</code> para que en la sección del
        teclado quede la línea:
      </p><pre class="programlisting">
    Option  "XkbLayout" "es"
    
</pre><p>
        o si su teclado es latinoamericano remplace
        <code class="literal">es</code> por <code class="literal">latam</code>.
      </p><p>
        Si tiene un teclado en inglés puede agregar las siguientes
        líneas a su archivo <code class="literal">~/.Xmodmap</code>
      </p><pre class="programlisting">
    keycode 64=Alt_L Multi_key
    keycode 48=dead_acute dead_diaeresis
    keycode 49=dead_grave dead_tilde 
</pre><p>
        y asegurarse de ejecutar <code class="literal">xmodmap ~/.Xmodmap</code>
        durante el arranque de su sesión X (podría ser por ejemplo
        agregándolo a <code class="literal">~/.xsession</code>)
      </p></div></div><div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idp584503800" href="#idp584503800">12</a>] </sup>
            En el caso de LPD el directorio con la cola de trabajos de
            una impresora se configura en
            <code xmlns="" class="literal">/etc/printcap</code>, en el caso de
            <code xmlns="" class="literal">lp</code> el directorio por defecto es
            <code xmlns="" class="literal">/var/spool/outputlpd/lp</code>.
          </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idp2001220344" href="#idp2001220344">13</a>] </sup>
            Normalmente puede configurar otro nombre para la impresora
            por defecto en la variable de ambiente PRINTER.
          </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idm1778458376" href="#idm1778458376">14</a>] </sup>
            Hay algunas impresoras que pueden imprimir PostScript
            directamente, pero en general para hacer la traducción de
            PostScript al lenguaje de una impresora se requiere un
            filtro que el administrador del sistema debe configurar.
          </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idm886559240" href="#idm886559240">15</a>] </sup>
            PDF (<span xmlns="" class="emphasis"><em>Portable Document Format</em></span> es otro
            lenguaje para impresión, de documentos con gráficas y
            diversos tipos de letras, basado en PostScript (de la misma
            compañía ---Adobe).
          </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idp2134290040" href="#idp2134290040">16</a>] </sup>
            De acuerdo a Printig-HOWTO estas herramientas ofrecen la
            funcionalidad de las herramientas
            "<span xmlns="" class="emphasis"><em>distiller</em></span>" de Adobe.
          </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idm830333960" href="#idm830333960">17</a>] </sup>
                Los parámetros del hardware mantenidos ayudan a
                localizar bloques libres de forma óptima.
              </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idm921787528" href="#idm921787528">18</a>] </sup>
                Si la sesión previa tenia -T esta también con mismo
                nombre de tablas (especificable con -table-name TN).
              </p></div><div class="footnote"><p xmlns="http://www.w3.org/TR/xhtml1/transitional"><sup>[<a name="ftn.idp1995308536" href="#idp1995308536">19</a>] </sup>
            Tecla de composición: en inglés <span xmlns="" class="emphasis"><em>compose
            key</em></span>
          </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="conf-programas.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="duales.html">Siguiente</a></td></tr><tr><td width="40%" align="left" valign="top">6. Configuración y uso de algunos programas </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> 8. Instalaciones duales</td></tr></table></div></body></html>
